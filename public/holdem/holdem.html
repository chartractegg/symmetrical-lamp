
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Texas Hold'em â€” Retro Symmetrical Lamp</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --win:#c0c0c0; --light:#ffffff; --mid:#dfdfdf; --shadow:#808080; --dark:#000000;
    --felt:#2f4f2f; --ink:#000; --red:#b00000;
  }
  *{box-sizing:border-box; user-select:none;}
  html,body{height:100%;}
  body{
    margin:0; background:var(--win); color:var(--ink);
    font:14px/1 Tahoma, Verdana, Arial, sans-serif;
    display:flex; align-items:center; justify-content:center;
  }
  .window{
    background:var(--win);
    border:2px solid var(--dark);
    box-shadow:
      inset -1px -1px 0 var(--dark),
      inset  1px  1px 0 var(--light),
      4px 4px 0 rgba(0,0,0,0.35);
    width: min(1020px, 100%);
    max-height: 96vh;
    display:flex;
    flex-direction:column;
  }
  .titlebar{
    background:linear-gradient(90deg,#02007a,#2a7bd8);
    color:#fff;
    padding:3px 8px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    font-weight:700;
  }
  .titlebar .title{
    display:flex; align-items:center; gap:6px;
  }
  .titlebar .sysbtns{
    display:flex; gap:2px;
  }
  .sysbtn{
    width:18px; height:18px;
    border:1px solid #000;
    background:#c0c0c0;
    box-shadow: inset -1px -1px 0 #000,
                inset  1px  1px 0 #fff;
    font-size:11px;
    display:flex; align-items:center; justify-content:center;
  }

  .toolbar{
    padding:6px 8px;
    background:var(--mid);
    border-bottom:2px solid var(--shadow);
    display:flex;
    gap:8px;
    align-items:center;
    flex-wrap:wrap;
  }
  .label{font-weight:700; margin-right:2px;}
  select, button, input{
    font:13px Tahoma, Arial;
  }
  select, input[type=number]{
    background:var(--win);
    border:2px solid var(--shadow);
    box-shadow:
      inset -1px -1px 0 var(--dark),
      inset  1px  1px 0 var(--light);
    padding:2px 4px;
  }

  button{
    min-width:72px;
    padding:3px 10px;
    background:var(--win);
    border:2px solid var(--shadow);
    box-shadow:
      inset -1px -1px 0 var(--dark),
      inset  1px  1px 0 var(--light);
    cursor:pointer;
  }
  button:active{
    box-shadow:
      inset -1px -1px 0 var(--light),
      inset  1px  1px 0 var(--dark);
  }
  button:disabled{
    opacity:.5;
    cursor:default;
  }

  .main{
    display:flex;
    flex:1;
    padding:10px;
    gap:8px;
  }
  .felt{
    flex:3;
    background:var(--felt);
    border-radius:10px;
    border:2px solid #1d321d;
    box-shadow: inset -1px -1px 0 #1d321d, inset 1px 1px 0 #000;
    padding:10px;
    color:#f0f0f0;
    display:flex;
    flex-direction:column;
    gap:8px;
  }
  .potline{
    display:flex;
    justify-content:space-between;
    align-items:center;
    font-weight:700;
  }
  .phase-badge{
    padding:2px 8px;
    background:#000;
    border-radius:999px;
    font-size:12px;
  }
  .potval{
    background:#000;
    border-radius:4px;
    padding:2px 6px;
    font-family:"Courier New", monospace;
  }

  .community{
    display:flex;
    justify-content:center;
    gap:6px;
    margin-top:4px;
    min-height:76px;
  }

  .card{
    width:46px; height:64px;
    border-radius:4px;
    background:#fff;
    border:2px solid #000;
    box-shadow: 0 2px 0 rgba(0,0,0,0.45);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    font-weight:700;
    font-size:18px;
  }
  .card.red{ color:#b00000; }
  .card.back{
    background:repeating-linear-gradient(
      45deg,
      #003,#003 4px,
      #0af 4px,#0af 8px
    );
    color:#fff;
  }
  .card.small{
    width:34px; height:46px;
    font-size:14px;
  }

  .players-strip{
    margin-top:8px;
    background:rgba(0,0,0,0.25);
    border-radius:6px;
    padding:6px;
    display:flex;
    flex-wrap:wrap;
    gap:6px;
    justify-content:space-between;
  }
  .seat{
    flex:1 1 150px;
    min-width:140px;
    max-width:200px;
    background:rgba(0,0,0,0.35);
    border-radius:6px;
    border:1px solid rgba(0,0,0,0.7);
    padding:4px 6px;
    display:flex;
    flex-direction:column;
    gap:2px;
  }
  .seat.you{
    border-color:#ffd700;
    box-shadow:0 0 0 2px rgba(255,215,0,0.4);
  }
  .seat-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    font-size:12px;
  }
  .name{font-weight:700;}
  .tag{
    font-size:11px;
    padding:1px 5px;
    border-radius:999px;
    background:#111;
  }
  .tag.out{ background:#330000; color:#ff8080; }
  .tag.winner{ background:#006400; color:#aaffaa; }

  .hole-row{
    display:flex;
    align-items:center;
    gap:4px;
    margin-top:2px;
  }
  .action-note{
    font-size:11px;
    opacity:.85;
  }

  .sidepanel{
    flex:1;
    background:var(--mid);
    border:2px solid var(--shadow);
    box-shadow: inset -1px -1px 0 var(--dark), inset 1px 1px 0 var(--light);
    padding:8px;
    display:flex;
    flex-direction:column;
    gap:8px;
  }
  .sidepanel h3{
    font-size:13px;
    margin:0 0 4px 0;
  }
  .log{
    flex:1;
    border:2px solid var(--shadow);
    background:#fff;
    box-shadow: inset -1px -1px 0 var(--dark), inset 1px 1px 0 var(--light);
    padding:4px;
    font-size:12px;
    overflow-y:auto;
    max-height:220px;
  }
  .log p{
    margin:0 0 2px 0;
  }

  .controls{
    padding:6px 8px;
    border-top:2px solid var(--shadow);
    display:flex;
    align-items:center;
    gap:8px;
    background:var(--mid);
  }
  .controls .status{
    flex:1;
    font-weight:700;
  }

  .backwrap{
    text-align:center;
    padding:6px;
  }
  .backbtn{
    font:14px Tahoma, Arial;
    padding:4px 18px;
    background:var(--win);
    border:2px solid var(--shadow);
    box-shadow:
      inset -1px -1px 0 var(--dark),
      inset  1px  1px 0 var(--light);
    cursor:pointer;
    color:#000;
    text-decoration:none;
    display:inline-block;
  }
  .backbtn:active{
    box-shadow:
      inset -1px -1px 0 var(--light),
      inset  1px  1px 0 var(--dark);
  }

  @media (max-width:840px){
    .main{ flex-direction:column; }
    .sidepanel{ order:-1; }
  }
</style>
</head>
<body>
<div class="window">
  <div class="titlebar">
    <div class="title">
      <span>ðŸ‚¡</span>
      <span>Texas Hold'em â€” Symmetrical Lamp</span>
    </div>
    <div class="sysbtns">
      <div class="sysbtn">_</div>
      <div class="sysbtn">â–¡</div>
      <div class="sysbtn">Ã—</div>
    </div>
  </div>

  <div class="toolbar">
    <div>
      <span class="label">Opponents:</span>
      <select id="oppCount">
        <option value="1">1</option>
        <option value="2" selected>2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
      </select>
    </div>
    <div>
      <span class="label">Base Bet</span>
      <input type="number" id="baseBet" min="5" step="5" value="20" />
    </div>
    <button id="newHandBtn">New Hand</button>
    <span style="font-size:12px; opacity:.9;">Simple limit-style game vs CPU â€” no bankroll tracking, just pot and bragging rights.</span>
  </div>

  <div class="main">
    <div class="felt">
      <div class="potline">
        <div>Pot: <span class="potval" id="potVal">0</span></div>
        <div class="phase-badge" id="phaseBadge">No hand</div>
      </div>
      <div class="community" id="communityRow">
        <!-- community cards -->
      </div>
      <div class="players-strip" id="playersStrip">
        <!-- seats -->
      </div>
    </div>
    <div class="sidepanel">
      <div>
        <h3>Hand Info</h3>
        <div style="font-size:12px;">
          <div>â€¢ Four betting rounds: Preflop, Flop, Turn, River.</div>
          <div>â€¢ You can Fold, Check/Call, or Bet/Raise each round.</div>
          <div>â€¢ CPU players auto-fold more with weak hands when you bet.</div>
        </div>
      </div>
      <div>
        <h3>Log</h3>
        <div class="log" id="log"></div>
      </div>
    </div>
  </div>

  <div class="controls">
    <button id="foldBtn" disabled>Fold</button>
    <button id="checkCallBtn" disabled>Check / Call</button>
    <button id="betBtn" disabled>Bet / Raise</button>
    <div class="status" id="status">Click "New Hand" to begin.</div>
  </div>

  <div class="backwrap">
    <a href="../index.html" class="backbtn">âŸµ Back</a>
  </div>
</div>

<script>
// ===== Card + deck helpers =====
const RANKS = ["2","3","4","5","6","7","8","9","10","J","Q","K","A"];
const SUITS = ["â™ ","â™¥","â™¦","â™£"];

function makeDeck(){
  const d = [];
  for(const s of SUITS){
    for(const r of RANKS){
      d.push({rank:r, suit:s});
    }
  }
  return d;
}
function shuffleDeck(deck){
  for(let i=deck.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [deck[i],deck[j]] = [deck[j],deck[i]];
  }
}
function drawCard(deck){
  return deck.pop();
}
function isRed(s){
  return s==="â™¥" || s==="â™¦";
}
function cardEl(card, small=false, faceDown=false){
  const el = document.createElement("div");
  el.className = "card" + (small ? " small" : "");
  if(faceDown){
    el.className += " back";
    el.textContent = "";
    return el;
  }
  if(isRed(card.suit)) el.className += " red";
  el.textContent = card.rank + card.suit;
  return el;
}

// ===== Hand evaluation (simplified but structured like real hold'em) =====
const RANK_VALUE = {
  "2":2,"3":3,"4":4,"5":5,"6":6,"7":7,
  "8":8,"9":9,"10":10,"J":11,"Q":12,"K":13,"A":14
};

function evaluateHand(cards){
  // cards: array of 7 {rank,suit}
  // Returns {score:number, label:string, category:number}
  // Categories: 8 SF,7 Quads,6 Full House,5 Flush,4 Straight,3 Trips,2 Two Pair,1 One Pair,0 High Card
  const ranks = cards.map(c=>RANK_VALUE[c.rank]).sort((a,b)=>b-a);
  const counts = {};
  const suits = {};
  for(const c of cards){
    const rv = RANK_VALUE[c.rank];
    counts[rv] = (counts[rv]||0)+1;
    suits[c.suit] = (suits[c.suit]||0)+1;
  }
  const uniqueRanks = Object.keys(counts).map(n=>parseInt(n)).sort((a,b)=>b-a);

  // flush
  let flushSuit = null;
  for(const s of SUITS){
    if((suits[s]||0) >= 5){
      flushSuit = s;
      break;
    }
  }
  let flushCards = [];
  if(flushSuit){
    flushCards = cards.filter(c=>c.suit===flushSuit)
                      .map(c=>RANK_VALUE[c.rank])
                      .sort((a,b)=>b-a);
  }

  // straight helper
  function bestStraight(values){
    // values: sorted desc array of unique rank values
    if(values.length < 5) return null;
    // add wheel case (A-5) by appending A as 1 at end
    const v = [...new Set(values)];
    if(v.includes(14)) v.push(1);
    let best = null;
    for(let i=0;i<v.length;i++){
      let run = [v[i]];
      for(let j=i+1;j<v.length && run.length<5;j++){
        if(v[j] === run[run.length-1]-1){
          run.push(v[j]);
        }else if(v[j] === run[run.length-1]){
          continue;
        }else{
          break;
        }
      }
      if(run.length>=5){
        const top = run[0]===14 && run[1]===5 ? 5 : run[0]; // wheel top = 5
        if(!best || top>best) best = top;
      }
    }
    return best;
  }

  // straight and straight flush
  const straightHigh = bestStraight(uniqueRanks);
  let sfHigh = null;
  if(flushCards.length>=5){
    sfHigh = bestStraight(flushCards);
  }

  // classify multiples
  const fours = [], threes = [], twos = [];
  for(const rv of uniqueRanks){
    const c = counts[rv];
    if(c===4) fours.push(rv);
    else if(c===3) threes.push(rv);
    else if(c===2) twos.push(rv);
  }

  let category = 0;
  let label = "High Card";
  let scoreParts = [0,0,0,0,0]; // up to 5 kickers depending on hand

  if(sfHigh !== null){
    category = 8;
    label = sfHigh===14 ? "Royal Flush" : "Straight Flush";
    scoreParts[0] = sfHigh;
  }else if(fours.length){
    category = 7;
    label = "Four of a Kind";
    scoreParts[0] = fours[0];
    const kicker = uniqueRanks.find(v=>v!==fours[0]) || 0;
    scoreParts[1] = kicker;
  }else if(threes.length && (twos.length || threes.length>1)){
    category = 6;
    label = "Full House";
    const threeRank = threes[0];
    const pairRank = (threes.length>1 ? threes[1] : twos[0]);
    scoreParts[0] = threeRank;
    scoreParts[1] = pairRank;
  }else if(flushSuit){
    category = 5;
    label = "Flush";
    for(let i=0;i<5;i++){
      scoreParts[i] = flushCards[i] || 0;
    }
  }else if(straightHigh !== null){
    category = 4;
    label = "Straight";
    scoreParts[0] = straightHigh;
  }else if(threes.length){
    category = 3;
    label = "Three of a Kind";
    scoreParts[0] = threes[0];
    let kickers = uniqueRanks.filter(v=>v!==threes[0]).slice(0,2);
    scoreParts[1] = kickers[0] || 0;
    scoreParts[2] = kickers[1] || 0;
  }else if(twos.length>=2){
    category = 2;
    label = "Two Pair";
    const [hiPair, loPair] = twos.slice(0,2);
    scoreParts[0] = hiPair;
    scoreParts[1] = loPair;
    const kicker = uniqueRanks.find(v=>v!==hiPair && v!==loPair) || 0;
    scoreParts[2] = kicker;
  }else if(twos.length===1){
    category = 1;
    label = "One Pair";
    const pairRank = twos[0];
    scoreParts[0] = pairRank;
    const kickers = uniqueRanks.filter(v=>v!==pairRank).slice(0,3);
    for(let i=0;i<3;i++) scoreParts[1+i] = kickers[i] || 0;
  }else{
    category = 0;
    label = "High Card";
    for(let i=0;i<5;i++){
      scoreParts[i] = uniqueRanks[i] || 0;
    }
  }

  // pack score so higher category and then parts win
  let score = category * 1e10;
  for(let i=0;i<5;i++){
    score += scoreParts[i] * Math.pow(100, 4-i);
  }
  return {score, label, category};
}

// ===== Game state =====
const oppCountSel = document.getElementById("oppCount");
const baseBetInput = document.getElementById("baseBet");
const newHandBtn = document.getElementById("newHandBtn");
const foldBtn = document.getElementById("foldBtn");
const checkCallBtn = document.getElementById("checkCallBtn");
const betBtn = document.getElementById("betBtn");
const statusEl = document.getElementById("status");
const potValEl = document.getElementById("potVal");
const phaseBadge = document.getElementById("phaseBadge");
const communityRow = document.getElementById("communityRow");
const playersStrip = document.getElementById("playersStrip");
const logEl = document.getElementById("log");

let deck = [];
let players = [];
let community = [];
let pot = 0;
let phase = "idle";
let lastActionWasBet = false;

function log(msg){
  const p = document.createElement("p");
  p.textContent = msg;
  logEl.appendChild(p);
  logEl.scrollTop = logEl.scrollHeight;
}
function setStatus(msg){
  statusEl.textContent = msg;
}

function setPhase(newPhase){
  phase = newPhase;
  const map = {
    idle:"No hand",
    preflop:"Preflop",
    flop:"Flop",
    turn:"Turn",
    river:"River",
    showdown:"Showdown"
  };
  phaseBadge.textContent = map[newPhase] || newPhase;
}

// ===== Rendering =====
function renderCommunity(){
  communityRow.innerHTML = "";
  if(!community.length){
    const span = document.createElement("span");
    span.textContent = "No board cards yet.";
    span.style.opacity = "0.8";
    communityRow.appendChild(span);
    return;
  }
  community.forEach(c=>{
    communityRow.appendChild(cardEl(c,false,false));
  });
}

function renderPlayers(showAll=false){
  playersStrip.innerHTML = "";
  players.forEach((pl,idx)=>{
    const seat = document.createElement("div");
    seat.className = "seat" + (pl.isHuman ? " you" : "");
    const head = document.createElement("div");
    head.className = "seat-header";

    const name = document.createElement("div");
    name.className = "name";
    name.textContent = pl.name;
    head.appendChild(name);

    const tag = document.createElement("div");
    tag.className = "tag";
    if(pl.folded){
      tag.classList.add("out");
      tag.textContent = "Folded";
    }else if(phase==="showdown" && pl.winner){
      tag.classList.add("winner");
      tag.textContent = "Winner";
    }else if(pl.isHuman){
      tag.textContent = "You";
    }else{
      tag.textContent = "CPU";
    }
    head.appendChild(tag);

    seat.appendChild(head);

    const holeRow = document.createElement("div");
    holeRow.className = "hole-row";
    const cardsWrap = document.createElement("div");
    cardsWrap.style.display = "flex";
    cardsWrap.style.gap = "4px";

    const reveal = showAll || phase==="showdown" || pl.isHuman || pl.folded===true;

    pl.hand.forEach(c=>{
      cardsWrap.appendChild(cardEl(c,true,!reveal));
    });

    holeRow.appendChild(cardsWrap);

    const note = document.createElement("div");
    note.className = "action-note";
    note.textContent = pl.lastNote || "";
    holeRow.appendChild(note);

    seat.appendChild(holeRow);
    playersStrip.appendChild(seat);
  });
}

function updatePot(delta){
  if(delta) pot += delta;
  if(pot<0) pot = 0;
  potValEl.textContent = pot;
}

// ===== Game Flow =====
function resetWinners(){
  players.forEach(p=>{ p.winner = false; });
}

function setupPlayers(){
  const oppCount = parseInt(oppCountSel.value,10) || 2;
  players = [];
  players.push({
    name:"You",
    isHuman:true,
    hand:[],
    inHand:true,
    folded:false,
    lastNote:""
  });
  for(let i=1;i<=oppCount;i++){
    players.push({
      name:"CPU " + i,
      isHuman:false,
      hand:[],
      inHand:true,
      folded:false,
      lastNote:""
    });
  }
}

function dealHands(){
  players.forEach(p=>{
    p.hand = [drawCard(deck), drawCard(deck)];
    p.inHand = true;
    p.folded = false;
    p.lastNote = "In hand.";
    p.winner = false;
  });
}

function startNewHand(){
  deck = makeDeck();
  shuffleDeck(deck);
  community = [];
  pot = 0;
  resetWinners();
  setupPlayers();
  const baseBet = Math.max(5, parseInt(baseBetInput.value,10) || 20);
  const ante = baseBet;
  updatePot(ante * players.length);
  log("New hand. Everyone antes " + ante + ".");
  dealHands();
  setPhase("preflop");
  lastActionWasBet = false;
  setStatus("Preflop: choose an action.");
  enableActionButtons(true);
  renderCommunity();
  renderPlayers(false);
}

function enableActionButtons(on){
  foldBtn.disabled = !on;
  checkCallBtn.disabled = !on;
  betBtn.disabled = !on;
  if(phase==="idle" || phase==="showdown"){
    foldBtn.disabled = true;
    checkCallBtn.disabled = true;
    betBtn.disabled = true;
  }
}

// CPU decision logic
function cpuAct(phaseName, playerBet){
  let folds = 0;
  players.forEach(p=>{
    if(p.isHuman || p.folded || !p.inHand) return;
    const cards = [...p.hand, ...community];
    const evalRes = evaluateHand(cards);
    // rough thresholds: weaker hands fold more when you bet, later streets
    let foldChance = 0.05; // default tiny
    if(playerBet){
      // base by category
      if(evalRes.category <= 0) foldChance = 0.7;       // high card
      else if(evalRes.category === 1) foldChance = 0.5; // one pair
      else if(evalRes.category === 2) foldChance = 0.35;
      else if(evalRes.category === 3) foldChance = 0.25;
      else foldChance = 0.15;
      // later streets increase fold chance
      if(phaseName==="turn") foldChance += 0.1;
      if(phaseName==="river") foldChance += 0.15;
    }else{
      // if you checked, they almost always continue
      if(evalRes.category <= 0) foldChance = 0.15;
      else if(evalRes.category === 1) foldChance = 0.08;
      else foldChance = 0.03;
    }
    foldChance = Math.min(Math.max(foldChance,0),0.95);
    if(Math.random() < foldChance){
      p.folded = true;
      p.inHand = false;
      p.lastNote = "Folded.";
      folds++;
    }else{
      p.lastNote = playerBet ? "Calls." : "Checks.";
    }
  });
  if(folds>0){
    log(folds + " opponent" + (folds>1?"s":"") + " folded.");
  }else{
    log("All opponents continue.");
  }
}

// Advance phases based on your choice
function goToNextStreet(playerAction){
  if(phase==="preflop"){
    // flop
    community.push(drawCard(deck), drawCard(deck), drawCard(deck));
    log("Flop dealt.");
    setPhase("flop");
  }else if(phase==="flop"){
    community.push(drawCard(deck));
    log("Turn dealt.");
    setPhase("turn");
  }else if(phase==="turn"){
    community.push(drawCard(deck));
    log("River dealt.");
    setPhase("river");
  }else if(phase==="river"){
    doShowdown();
    return;
  }
  renderCommunity();
  cpuAct(phase, playerAction==="bet");
  renderPlayers(false);
  setStatus(phase.charAt(0).toUpperCase()+phase.slice(1)+": choose an action.");
}

function doShowdown(){
  setPhase("showdown");
  enableActionButtons(false);
  // who is still in?
  const contenders = players.filter(p=>p.inHand && !p.folded);
  if(contenders.length===0){
    // everyone somehow folded; just say pot unclaimed
    setStatus("Everyone folded. Pot carries to the void.");
    log("Weird hand: no contenders.");
    renderPlayers(true);
    return;
  }
  // evaluate each
  let bestScore = -1;
  let bestLabel = "";
  contenders.forEach(p=>{
    const evalRes = evaluateHand([...p.hand, ...community]);
    p.evalLabel = evalRes.label;
    p.evalCategory = evalRes.category;
    p.evalScore = evalRes.score;
    if(evalRes.score > bestScore){
      bestScore = evalRes.score;
      bestLabel = evalRes.label;
    }
  });
  // mark winners
  const winners = contenders.filter(p=>p.evalScore === bestScore);
  winners.forEach(p=>{ p.winner = true; });
  renderCommunity();
  renderPlayers(true);

  if(winners.length === 1){
    const w = winners[0];
    const msg = (w.isHuman ? "You" : w.name) + " win" + (w.isHuman?"":"s") +
      " the pot with " + bestLabel + ".";
    setStatus(msg);
    log(msg + " Pot was " + pot + ".");
  }else{
    const names = winners.map(w=>w.isHuman ? "You" : w.name).join(", ");
    const msg = "Split pot between: " + names + " (" + bestLabel + ").";
    setStatus(msg);
    log(msg + " Pot was " + pot + ".");
  }
}

// ===== Event handlers =====
newHandBtn.addEventListener("click", ()=>{
  setStatus("Dealing new hand...");
  log("------------------------------------------------");
  startNewHand();
});

foldBtn.addEventListener("click", ()=>{
  if(phase==="idle" || phase==="showdown") return;
  const you = players[0];
  you.folded = true;
  you.inHand = false;
  you.lastNote = "You folded.";
  log("You fold and surrender the pot.");
  setStatus("You folded. Hand over.");
  setPhase("showdown");
  enableActionButtons(false);
  renderPlayers(true);
});

checkCallBtn.addEventListener("click", ()=>{
  if(phase==="idle" || phase==="showdown") return;
  log("You check/call.");
  players[0].lastNote = "Check/Call.";
  lastActionWasBet = false;
  goToNextStreet("check");
});

betBtn.addEventListener("click", ()=>{
  if(phase==="idle" || phase==="showdown") return;
  const baseBet = Math.max(5, parseInt(baseBetInput.value,10) || 20);
  log("You bet/raise " + baseBet + ".");
  updatePot(baseBet);
  players[0].lastNote = "Bet/Raise " + baseBet + ".";
  lastActionWasBet = true;
  goToNextStreet("bet");
});

// initial
setPhase("idle");
renderCommunity();
renderPlayers(false);
setStatus("Click \"New Hand\" to begin.");
log("Welcome to Texas Hold'em â€” Retro Symmetrical Lamp.");
</script>
</body>
</html>
